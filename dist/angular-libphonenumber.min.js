/**
 * angular-libphonenumber
 * Nathan Hammond's libphonenumber ported to an angular filter
 * @version v0.0.9
 * @link https://github.com/cwill747/angular-libphonenumber
 * @license Apache-2.0
 */
!function(t){t.module("cwill747.phonenumber",[]).directive("phoneNumber",["$log",function(t){function e(t){return t?t.replace(/([^0-9|+])/g,""):t}function r(t){return!isNaN(parseFloat(t))&&isFinite(t)}function n(t,e){var n="";for(i=0;i<t.length;i++)r(t.charAt(i))&&(n+=t.charAt(i));for(var o=n;!(phoneUtils.isValidNumberForRegion(o,e)||(o+="0",i++>=25)););for(var u=phoneUtils.formatNational(o,e),i=0,l=0,c="";i<n.length;)c+=u.charAt(l),r(u.charAt(l))&&i++,l++;return c}function o(e,r){var o=e;try{o=n(e,r)}catch(u){t.debug(u)}return o}return{restrict:"A",require:"?ngModel",scope:{countryCode:"="},controllerAs:"",controller:function(){this.countryCode=this.countryCode||"us"},link:function(r,n,u,i){function l(t){return i.$isEmpty(t)?t:o(e(t),r.countryCode)}function c(t){if(i.$isEmpty(t))return t;var r=a(t);if(r===t)return t;var n=s.selectionStart,o=s.selectionEnd+r.length-t.length;return t.length<r.length&&(n+=r.length-t.length),t.length>r.length+1&&(n-=r.length-t.length),i.$setViewValue(r),i.$render(),s.setSelectionRange(n,o),e(r)}function a(t){var n=e(t),u="";return u=n&&n.length>1?o(n,r.countryCode):n,u.trim()}function h(e){var n=!1;try{n=phoneUtils.isValidNumberForRegion(e,r.countryCode)}catch(o){t.debug(o)}var u=i.$isEmpty(e)||n;return i.$setValidity("phoneNumber",u),e}var s=n[0];r.$watch("countryCode",function(){i.$modelValue=i.$viewValue+" "}),i.$formatters.push(l),i.$formatters.push(h),i.$parsers.push(c),i.$parsers.push(h)}}}])}(angular);